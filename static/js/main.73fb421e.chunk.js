(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(4),l=n.n(r),c=n(3),s=n(2);n(11);function i(e){const t=Object(s.o)(),[n,o]=a.a.useState(e.defaultTodoText||"");return a.a.createElement("form",{onSubmit:o=>{o.preventDefault(),t("/"),e.submitEvent(n)}},a.a.createElement("label",null,e.label),a.a.createElement("textarea",{value:n,onChange:e=>{o(e.target.value)},placeholder:"Write"}),a.a.createElement("div",{className:"TodoForm-buttonContainer"},a.a.createElement("button",{type:"button",className:"TodoForm-button TodoForm-button--cancel",onClick:()=>{t("/")}},"Cancel"),a.a.createElement("button",{type:"submit",className:"TodoForm-button TodoForm-button--add"},e.submitText)))}function d(e,t){const[n,o]=a.a.useReducer(p,m({initialValue:t})),{sincronizedItem:r,error:l,loading:c,item:s}=n,i=e=>o({type:u.error,payload:e});a.a.useEffect(()=>{setTimeout(()=>{try{const n=localStorage.getItem(e);let a;n?a=JSON.parse(n):(localStorage.setItem(e,JSON.stringify(t)),a=t),(e=>o({type:u.success,payload:e}))(a)}catch(l){i(l)}},1e3)},[r]);return{item:s,saveItem:t=>{try{const n=JSON.stringify(t);localStorage.setItem(e,n),(e=>o({type:u.save,payload:e}))(t)}catch(l){i(l)}},loading:c,error:l,sincronizeItem:()=>{o({type:u.sincronize})}}}const m=e=>{let{initialValue:t}=e;return{sincronizedItem:!0,error:!1,loading:!0,item:t}},u={error:"ERROR",success:"SUCCESS",save:"SAVE",sincronize:"SINCRONIZE"},p=(e,t)=>((e,t)=>({[u.error]:{...e,error:!0},[u.success]:{...e,error:!1,loading:!1,sincronizedItem:!0,item:t},[u.save]:{...e,item:t},[u.sincronize]:{...e,sincronizedItem:!1,loading:!0}}))(e,t.payload)[t.type]||e;function E(){const{item:e,saveItem:t,sincronizeItem:n,loading:o,error:r}=d("TODOS_V2",[]),[l,c]=a.a.useState(""),s=e.filter(e=>!!e.completed).length,i=e.length;let m=[];m=!l.length>=1?e:e.filter(e=>{const t=e.text.toLowerCase(),n=l.toLowerCase();return t.includes(n)});return{state:{loading:o,error:r,totalTodos:i,completedTodos:s,searchValue:l,searchedTodos:m,getTodo:t=>{const n=e.findIndex(e=>e.id===t);return e[n]}},stateUpdaters:{setSearchValue:c,addTodo:n=>{const o=function(e){if(0===e.length)return 1;const t=e.map(e=>e.id);return Math.max(...t)+1}(e),a=[...e];a.push({completed:!1,text:n,id:o}),t(a)},completeTodo:n=>{const o=e.findIndex(e=>e.id===n),a=[...e];a[o].completed=!0,t(a)},editTodo:(n,o)=>{const a=e.findIndex(e=>e.id===n),r=[...e];r[a].text=o,t(r)},deleteTodo:n=>{const o=e.findIndex(e=>e.id===n),a=[...e];a.splice(o,1),t(a)},sincronizeTodos:n}}}function f(){const{stateUpdaters:e}=E(),{addTodo:t}=e;return a.a.createElement(i,{label:"Create New TODO",submitText:"Add",submitEvent:e=>t(e)})}function g(){var e;const t=Object(s.m)(),n=Object(s.q)(),o=Number(n.id),{state:r,stateUpdaters:l}=E(),{loading:c,getTodo:d}=r,{editTodo:m}=l;let u;if(null===(e=t.state)||void 0===e?void 0:e.todo)u=t.state.todo.text;else{if(c)return a.a.createElement("p",null,"Loading...");u=d(o).text}return a.a.createElement(i,{label:"Edit TODO",defaultTodoText:u,submitText:"Edit",submitEvent:e=>m(o,e)})}function T(e){let{children:t,loading:n}=e;return a.a.createElement("header",null,a.a.Children.toArray(t).map(e=>a.a.cloneElement(e,{loading:n})))}n(12);function h(e){let{totalTodos:t,completedTodos:n,loading:o}=e;return a.a.createElement("h2",{className:"TodoCounter ".concat(!!o&&"TodoCounter--loading")},"Has completed ",n," of ",t," TODOs")}n(13);function v(e){let{searchValue:t,setSearchValue:n,loading:o}=e;return a.a.createElement("input",{className:"TodoSearch",placeholder:"Search",value:t,onChange:e=>{console.log(e.target.value),n(e.target.value)},disabled:o})}var b;n(14);function y(e){const t=e.children||e.render;return a.a.createElement("section",{className:"TodoList-container"},e.error&&e.onError(),e.loading&&e.onLoading(),!e.loading&&!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.searchedTodos.length&&e.onEmptySearchResults(e.searchText),!e.loading&&!e.error&&e.searchedTodos.map(t))}function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const C=e=>{let{svgRef:t,...n}=e;return a.a.createElement("svg",O({viewBox:"0 0 405.272 405.272",xmlSpace:"preserve",ref:t},n),b||(b=a.a.createElement("path",{d:"M393.401,124.425L179.603,338.208c-15.832,15.835-41.514,15.835-57.361,0L11.878,227.836 c-15.838-15.835-15.838-41.52,0-57.358c15.841-15.841,41.521-15.841,57.355-0.006l81.698,81.699L336.037,67.064 c15.841-15.841,41.523-15.829,57.358,0C409.23,82.902,409.23,108.578,393.401,124.425z"})))},I=a.a.forwardRef((e,t)=>a.a.createElement(C,O({svgRef:t},e)));var S;n.p;function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const N=e=>{let{svgRef:t,...n}=e;return a.a.createElement("svg",w({viewBox:"0 0 348.333 348.334",xmlSpace:"preserve",ref:t},n),S||(S=a.a.createElement("path",{d:"M336.559,68.611L231.016,174.165l105.543,105.549c15.699,15.705,15.699,41.145,0,56.85 c-7.844,7.844-18.128,11.769-28.407,11.769c-10.296,0-20.581-3.919-28.419-11.769L174.167,231.003L68.609,336.563 c-7.843,7.844-18.128,11.769-28.416,11.769c-10.285,0-20.563-3.919-28.413-11.769c-15.699-15.698-15.699-41.139,0-56.85 l105.54-105.549L11.774,68.611c-15.699-15.699-15.699-41.145,0-56.844c15.696-15.687,41.127-15.687,56.829,0l105.563,105.554 L279.721,11.767c15.705-15.687,41.139-15.687,56.832,0C352.258,27.466,352.258,52.912,336.559,68.611z"})))},x=a.a.forwardRef((e,t)=>a.a.createElement(N,w({svgRef:t},e)));var L,k;n.p;function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}const R=e=>{let{svgRef:t,...n}=e;return a.a.createElement("svg",z({viewBox:"0 0 24 24",fill:"none",ref:t},n),L||(L=a.a.createElement("path",{d:"M0 18.9993V24H5.00069L19.756 9.24459L14.7553 4.2439L0 18.9993Z"})),k||(k=a.a.createElement("path",{d:"M23.6099 3.5038L20.4961 0.390054C19.9761 -0.130018 19.1293 -0.130018 18.6092 0.390054L16.1689 2.83039L21.1695 7.83108L23.6099 5.39074C24.13 4.87067 24.13 4.02387 23.6099 3.5038Z"})))},D=a.a.forwardRef((e,t)=>a.a.createElement(R,z({svgRef:t},e)));n.p,n(15);const V={check:e=>a.a.createElement(I,{className:"Icon-svg Icon-svg--check",fill:e}),edit:e=>a.a.createElement(D,{className:"Icon-svg Icon-svg--edit",fill:e}),delete:e=>a.a.createElement(x,{className:"Icon-svg Icon-svg--delete",fill:e})};function j(e){let{type:t,color:n="gray",onClick:o}=e;return a.a.createElement("span",{className:"Icon-container Icon-container--".concat(t),onClick:o},V[t](n))}function F(e){let{completed:t,onComplete:n}=e;return a.a.createElement(j,{type:"check",color:t?"#4caf50":"gray",onClick:n})}function A(e){let{onEdit:t}=e;return a.a.createElement(j,{type:"edit",onClick:t})}function B(e){let{onDelete:t}=e;return a.a.createElement(j,{type:"delete",onClick:t})}n(16);function J(e){return a.a.createElement("li",{className:"TodoItem"},a.a.createElement(F,{completed:e.completed,onComplete:e.onComplete}),a.a.createElement("p",{className:"TodoItem-p ".concat(e.completed&&"TodoItem-p--complete")},e.text),a.a.createElement(A,{onEdit:e.onEdit}),a.a.createElement(B,{onDelete:e.onDelete}))}function M(){return a.a.createElement("p",null,"Error")}n(17);function U(){return a.a.createElement("div",{className:"LoadingTodo-container"},a.a.createElement("span",{className:"LoadingTodo-completeIcon"}),a.a.createElement("p",{className:"LoadingTodo-text"},"Loading TODOs..."),a.a.createElement("span",{className:"LoadingTodo-deleteIcon"}))}function H(){return a.a.createElement("p",null,"Create your first TODO")}n(18);function P(e){return a.a.createElement("button",{className:"CreateTodoButton",onClick:e.onClick},"+")}n(19);function Z(e){let{sincronize:t}=e;const{show:n,toggleShow:o}=function(e){const[t,n]=a.a.useState(!1);return window.addEventListener("storage",e=>{"TODOS_V1"===e.key&&(console.log("Hubo cambios en TODOS_V1"),n(!0))}),{show:t,toggleShow:()=>{e(),n(!1)}}}(t);return n?a.a.createElement("div",{className:"ChangeAlert-bg"},a.a.createElement("div",{className:"ChangeAlert-container"},a.a.createElement("p",null,"It looks like you changed your TODOs in another tab or browser window."),a.a.createElement("p",null,"Want to synchronize your TODOs?"),a.a.createElement("button",{className:"TodoForm-button TodoForm-button--add",onClick:o},"Yes!"))):null}function _(){const e=Object(s.o)(),{state:t,stateUpdaters:n}=E(),{error:o,loading:r,searchedTodos:l,totalTodos:c,completedTodos:i,searchValue:d}=t,{deleteTodo:m,setSearchValue:u,sincronizeTodos:p,completeTodo:f}=n;return a.a.createElement(a.a.Fragment,null,a.a.createElement(T,{loading:r},a.a.createElement(h,{totalTodos:c,completedTodos:i}),a.a.createElement(v,{searchValue:d,setSearchValue:u})),a.a.createElement(y,{error:o,loading:r,totalTodos:c,searchedTodos:l,searchText:d,onError:()=>a.a.createElement(M,null),onLoading:()=>a.a.createElement(U,null),onEmptyTodos:()=>a.a.createElement(H,null),onEmptySearchResults:e=>a.a.createElement("p",null,"No results for ",e)},t=>a.a.createElement(J,{key:t.id,text:t.text,completed:t.completed,onEdit:()=>e("/edit/"+t.id,{state:{todo:t}}),onComplete:()=>f(t.id),onDelete:()=>m(t.id)})),a.a.createElement(P,{onClick:()=>e("/new")}),a.a.createElement(Z,{sincronize:p}))}function W(){return a.a.createElement(c.a,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/",element:a.a.createElement(_,null)}),a.a.createElement(s.a,{path:"/new",element:a.a.createElement(f,null)}),a.a.createElement(s.a,{path:"/edit/:id",element:a.a.createElement(g,null)}),a.a.createElement(s.a,{path:"*",element:a.a.createElement("p",null,"Not Found")})))}n(20);l.a.render(a.a.createElement(W,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.73fb421e.chunk.js.map